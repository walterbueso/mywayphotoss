@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{ var selection = CurrentPage.Site().Children.Where("Visible"); }

@foreach (var item in selection)
{
    if (item.Children.Count() > 0)
    {
        <li class="dropdown">
            <a href="@item.Url" class="dropdown-toggle" data-toggle="dropdown">@item.Name</a>
            <ul class="dropdown-menu" role="menu">
                @foreach (var child in item.Children)
                    {
                    <li><a href="@child.Url">@child.Name</a></li>
                }
            </ul>
        </li>
    }
    else
    {
        <li><a href="@item.Url">@item.Name</a></li>
    }
}